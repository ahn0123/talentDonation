<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.talentDonation.mapper.ProgramMapper">

	<!-- 프로그램 랜덤 정보 가져오기 -->
    <select id="getProgramExampleRandom" resultType="com.talentDonation.dto.Program">
    	<![CDATA[
    	select ROWNUM, A.* from (select * from program where prog_rsv_status=1 order by DBMS_RANDOM.RANDOM) A where ROWNUM<=10
    	]]>
    </select>

	<!-- 프로그램 신청하기 -->   
    <insert id="addApply">
    	insert into apply values(#{dogId}, #{progId}, 0, sysdate)
    </insert>
    
    <!-- 프로그램 신청 중복 방지(count) -->
    <select id="getApplyCount" resultType="int">
        select count(*) from apply where apply_dog_id=#{dogId} and apply_prog_id=#{progId} and apply_status = 0
    </select>
    
    <!-- 프로그램 교육현황 상태값 가져오기 -->
    <select id="getProgStatus" resultType="int">
        select prog_status from program where prog_id=#{revProgId}
    </select>
    
    <!-- 교육신청 상태값 가져오기 -->
    <select id="getApplyStatus" resultType="int">
        select apply_status from apply where apply_prog_id=#{revProgId} and apply_dog_id=#{revDogId}
    </select>
	
</mapper>